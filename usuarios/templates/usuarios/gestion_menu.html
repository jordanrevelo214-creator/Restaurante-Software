{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Menú - El Rincón que No Conoces</title>
    <link rel="stylesheet" href="{% static 'usuarios/css/dashboard_gerente.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <nav class="sidebar">
        <div class="logo"><i class="fas fa-utensils"></i> El Rincón...</div>
        <div class="nav-links">
            <a href="{% url 'usuarios:dashboard_gerente' %}"><i class="fas fa-home"></i> Dashboard</a>
            <a href="#" class="active"><i class="fas fa-hamburger"></i> Menú</a>
            <a href="{% url 'usuarios:gestion_inventario' %}"><i class="fas fa-boxes"></i> Inventario</a>
            <a href="{% url 'usuarios:reportes_ventas' %}"><i class="fas fa-chart-line"></i> Reportes</a>
            <a href="{% url 'usuarios:lista_usuarios' %}"><i class="fas fa-users"></i> Personal</a>
            <a href="{% url 'usuarios:logout' %}"><i class="fas fa-sign-out-alt"></i> Salir</a>
        </div>
    </nav>

    <main class="main-content">
        <header>
            <h2>Gestión del Menú</h2>
            <a href="{% url 'admin:pedidos_producto_add' %}" target="_blank" class="btn-confirmar" style="width: auto; margin: 0; background: #f28500; color: white; text-decoration: none; padding: 10px 20px; border-radius: 8px;">
                + Nuevo Plato
            </a>
        </header>

        <section class="audit-section">
            <table>
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Precio Venta</th>
                        <th>Costo Real</th>
                        <th>Stock (Platos)</th>
                        <th>Estado</th>
                        <th>Acción</th>
                    </tr>
                </thead>
                <tbody>
                    {% for p in productos %}
                    <tr>
                        <td>
                            <div style="font-weight: bold;">{{ p.nombre }}</div>
                        </td>
                        <td style="color: #2e7d32; font-weight: bold;">${{ p.precio }}</td>
                        <td style="color: #777;">${{ p.costo_elaboracion|floatformat:2 }}</td>
                        <td>{{ p.stock }}</td>
                        <td>
                            {% if p.disponible %}
                                <span style="background: #e8f5e9; color: #2e7d32; padding: 4px 8px; border-radius: 4px; font-size: 0.8em;">Disponible</span>
                            {% else %}
                                <span style="background: #ffebee; color: #c62828; padding: 4px 8px; border-radius: 4px; font-size: 0.8em;">No Disponible</span>
                            {% endif %}
                        </td>
                        <td>
                            <a href="{% url 'admin:pedidos_producto_change' p.id %}" target="_blank" style="color: #f28500; text-decoration: none; font-weight: bold;">
                                <i class="fas fa-edit"></i> Editar
                            </a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="6">No hay productos en el menú.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>
    </main>
</body>
</html>